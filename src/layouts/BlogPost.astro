---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  date: Date;
  description?: string;
  tags?: string[];
  cover_image?: string;
}

const { title, date, description, tags = [], cover_image } = Astro.props;
const formattedDate = new Intl.DateTimeFormat('en-US', {
  year: 'numeric', month: 'long', day: 'numeric',
}).format(date);
---

<BaseLayout title={title} description={description}>
  <article class="max-w-3xl mx-auto px-4 py-16">
    <header class="mb-10">
      <div class="flex items-center gap-3 mb-4 flex-wrap">
        <time datetime={date.toISOString()} class="text-sm text-gray-400">{formattedDate}</time>
        {tags.map(tag => (
          <span class="text-xs bg-blue-50 text-blue-700 border border-blue-100 px-2 py-0.5 rounded-full">{tag}</span>
        ))}
      </div>
      <h1 class="text-4xl font-bold text-gray-900 leading-tight mb-4">{title}</h1>
      {description && <p class="text-xl text-gray-500 leading-relaxed">{description}</p>}
      {cover_image && (
        <img src={cover_image} alt={title} class="mt-8 w-full rounded-2xl object-cover max-h-80" />
      )}
    </header>
    <div class="prose prose-gray prose-lg max-w-none
      prose-headings:font-bold prose-headings:text-gray-900
      prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
      prose-code:bg-gray-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm
      prose-pre:bg-gray-900 prose-pre:text-gray-100
      prose-img:rounded-xl prose-img:shadow-sm">
      <slot />
    </div>
    <div class="mt-16 pt-8 border-t border-gray-100">
      <a href="/" class="inline-flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors">
        &larr; Back to all posts
      </a>
    </div>
  </article>
</BaseLayout>
